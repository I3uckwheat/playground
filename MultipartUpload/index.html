<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Upload</title>
  </head>
  <body>

      <form id="file-form" action="/upload" method="POST">
          <input type="file" id="file-select" name="photos[]" multiple/>
          <input type="text" id="category" name="category"/>
          <button type="submit" id="upload-button">Upload</button>
      </form>

    <script>

      const fileForm = document.getElementById('file-form');
      const fileInput = document.getElementById('file-select');
      const category = document.getElementById('category');

      fileForm.onsubmit = function(event){
        event.preventDefault();
        const formData = new FormData();

        for(let i = 0; i < fileInput.files.length; i++){
          console.log(fileInput.files[i]);
          formData.append("images", fileInput.files[i])
        }
        formData.append("category", category.value)

        const xhr = new XMLHttpRequest();
        xhr.open("POST", "/upload");
        xhr.send(formData)
      }

    </script>
  </body>
</html>
